<html>

<head>
    <title>Express</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <iframe name="hiddenFrame" width="0" height="0" border="0" style="display: none;"></iframe>
    <h1>Web Security</h1>
    <div>
        <img src="https://www.monkeyuser.com/assets/images/2020/192-teamwork.png" style="max-width: 700px;">
    </div>
    <form action="http://localhost:3000/auth/login" target="hiddenFrame" method="POST">

        <input type="text" name="username" value="John" />
        <input type="text" name="password" value="mypassword" />
        <input type="submit" value="Login" />
    </form>
    <div id="user-actions">
        <div>
            <span>
                <input type="button" onclick="getAmount()" value="Get money">
                <span id="amount"></span>
            </span>
        </div>
        <div>
            <form action="http://localhost:3000/money" target="hiddenFrame" method="POST">
                <input type="submit" value="Set money" />
                <input type="text" name="money" value="" />
            </form>
        </div>
    </div>
    <script>
        getAmount();
        document.getElementById("user-actions").style.display = document.cookie.indexOf('authorization') !== -1
            ? 'inline' : 'none';
        function getAmount() {
            var request = new XMLHttpRequest();
            request.open("GET", "http://localhost:3000/money");
            request.onreadystatechange = function () {
                if (this.readyState === 4 && this.status === 200) {
                    document.getElementById("amount").innerHTML = this.responseText;
                }
            };
            request.send();
        }
    </script>
    </div>
</body>

</html>